<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenCart - Buy Groceries</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="bg-light">
    <div class="container mt-4">
        <h2 class="text-success">Available Groceries Near You ðŸ¥¬</h2>
        <a href="/buyer-dashboard" class="btn btn-secondary mt-2"> Back</a>
        <a href="/wallet" class="btn btn-warning mt-2 float-end">Wallet</a>
        <hr>

        <div class="row">
            {% for item in products%}
            <div class="col-md-4">
                <div class="card shadow mb-4">
                    <img src="/static/uploads/{{item['image']}}" class="card-img-top" height="200">
                    <div class="card-body">
                        <h5 class="card-title">{{item['name']}}</h5>
                        <p>Qty: {{item['qty']}} | Expires: {{item['expiry_date']}}</p>
                        <h5>â‚¹ {{item['price']}}</h5>
                        <a href="/buy/{{item['id']}}" class="btn btn-success w-100">Buy Now</a>

                    </div>

                </div>

            </div>
            {% endfor %}
            {% if products|length == 0 %}
            <div class="alert alert-warning mt-4 text-center">
                No groceries available near your location
            </div>
             {% endif %}
        </div>

        

    </div>
    <script>
    // check if URL contains ?success=1
        if (window.location.search.includes("success=1")) {
            alert("Order Successful!");
            // remove success flag so popup doesn't repeat on refresh
            window.history.replaceState({}, document.title, "/products");
        }
    </script>

    
</body>
</html>